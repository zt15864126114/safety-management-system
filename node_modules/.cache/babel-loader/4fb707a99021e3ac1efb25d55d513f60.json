{"remainingRequest":"D:\\safety-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\safety-management-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\safety-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\safety-management-system\\src\\views\\Analysis.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\safety-management-system\\src\\views\\Analysis.vue","mtime":1735550417502},{"path":"D:\\safety-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\safety-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\safety-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\safety-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgZWNoYXJ0cyBmcm9tICdlY2hhcnRzJzsKaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7CmltcG9ydCAqIGFzIFhMU1ggZnJvbSAneGxzeCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQW5hbHlzaXMnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDliIbmnpDooajljZUKICAgICAgYW5hbHlzaXNGb3JtOiB7CiAgICAgICAgdHlwZTogJycsCiAgICAgICAgbWV0cmljczogW10sCiAgICAgICAgZGF0ZVJhbmdlOiBbXSwKICAgICAgICBncmFudWxhcml0eTogJycsCiAgICAgICAgZGV2aWNlczogW10KICAgICAgfSwKICAgICAgLy8g6KGo5Y2V6aqM6K+B6KeE5YiZCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdHlwZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeWIhuaekOexu+WeiycsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dLAogICAgICAgIG1ldHJpY3M6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nmlbDmja7mjIfmoIcnLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICBkYXRlUmFuZ2U6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nml7bpl7TojIPlm7QnLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICBncmFudWxhcml0eTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeaVsOaNrueykuW6picsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dLAogICAgICAgIGRldmljZXM6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6norr7lpIcnLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XQogICAgICB9LAogICAgICAvLyDorr7lpIfliJfooagKICAgICAgZGV2aWNlTGlzdDogW10sCiAgICAgIC8vIOWKoOi9veeKtuaAgQogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g5YiG5p6Q57uT6K66CiAgICAgIGNvbmNsdXNpb246IG51bGwsCiAgICAgIC8vIOihqOagvOaVsOaNrgogICAgICB0YWJsZURhdGE6IFtdLAogICAgICB0YWJsZUNvbHVtbnM6IFtdLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbDogMCwKICAgICAgLy8g5qih5p2/5a+56K+d5qGGCiAgICAgIHRlbXBsYXRlRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHRlbXBsYXRlRm9ybTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJwogICAgICB9LAogICAgICB0ZW1wbGF0ZVJ1bGVzOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaooeadv+WQjeensCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0RGV2aWNlTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W6K6+5aSH5YiX6KGoCiAgICBhc3luYyBnZXREZXZpY2VMaXN0KCkgewogICAgICAvLyDmqKHmi59BUEnosIPnlKgKICAgICAgdGhpcy5kZXZpY2VMaXN0ID0gW3sKICAgICAgICBpZDogJ0RFVjAwMScsCiAgICAgICAgbmFtZTogJ+WPjeW6lOmHnEEnCiAgICAgIH0sIHsKICAgICAgICBpZDogJ0RFVjAwMicsCiAgICAgICAgbmFtZTogJ+WCqOe9kEInCiAgICAgIH1dOwogICAgfSwKICAgIC8vIOW8gOWni+WIhuaekAogICAgc3RhcnRBbmFseXNpcygpIHsKICAgICAgdGhpcy4kcmVmcy5hbmFseXNpc0Zvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIC8vIOaooeaLn+WIhuaekOi/h+eoiwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVBbmFseXNpc1Jlc3VsdCgpOwogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIH0sIDIwMDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g55Sf5oiQ5YiG5p6Q57uT5p6cCiAgICBnZW5lcmF0ZUFuYWx5c2lzUmVzdWx0KCkgewogICAgICAvLyDnlJ/miJDlm77ooagKICAgICAgdGhpcy5pbml0Q2hhcnQoKTsKCiAgICAgIC8vIOeUn+aIkOe7k+iuugogICAgICB0aGlzLmNvbmNsdXNpb24gPSB7CiAgICAgICAgdGl0bGU6ICfliIbmnpDlj5HnjrDlvILluLjotovlir8nLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICBkZXNjcmlwdGlvbjogJ+WcqOi/h+WOuzI05bCP5pe25YaF77yM6K6+5aSH5rip5bqm5ZGI546w5LiK5Y2H6LaL5Yq/77yM5bu66K6u5YWz5rOo44CCJwogICAgICB9OwoKICAgICAgLy8g55Sf5oiQ6KGo5qC85pWw5o2uCiAgICAgIHRoaXMuZ2VuZXJhdGVUYWJsZURhdGEoKTsKICAgIH0sCiAgICAvLyDliJ3lp4vljJblm77ooagKICAgIGluaXRDaGFydCgpIHsKICAgICAgY29uc3QgY2hhcnQgPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5DaGFydCcpKTsKICAgICAgY29uc3Qgb3B0aW9uID0gewogICAgICAgIC8vIOWbvuihqOmFjee9ri4uLgogICAgICB9OwogICAgICBjaGFydC5zZXRPcHRpb24ob3B0aW9uKTsKICAgIH0sCiAgICAvLyDnlJ/miJDooajmoLzmlbDmja4KICAgIGdlbmVyYXRlVGFibGVEYXRhKCkgewogICAgICAvLyDnlJ/miJDooajmoLzliJcKICAgICAgdGhpcy50YWJsZUNvbHVtbnMgPSBbewogICAgICAgIHByb3A6ICd0aW1lJywKICAgICAgICBsYWJlbDogJ+aXtumXtCcsCiAgICAgICAgd2lkdGg6ICcxODAnCiAgICAgIH0sIHsKICAgICAgICBwcm9wOiAnZGV2aWNlJywKICAgICAgICBsYWJlbDogJ+iuvuWkhycsCiAgICAgICAgd2lkdGg6ICcxMjAnCiAgICAgIH0sIHsKICAgICAgICBwcm9wOiAndmFsdWUnLAogICAgICAgIGxhYmVsOiAn5pWw5YC8JywKICAgICAgICB3aWR0aDogJzEwMCcKICAgICAgfV07CgogICAgICAvLyDnlJ/miJDooajmoLzmlbDmja4KICAgICAgdGhpcy50YWJsZURhdGEgPSBbewogICAgICAgIHRpbWU6ICcyMDI0LTAxLTIwIDEwOjAwJywKICAgICAgICBkZXZpY2U6ICflj43lupTph5xBJywKICAgICAgICB2YWx1ZTogNjUuMgogICAgICB9LCB7CiAgICAgICAgdGltZTogJzIwMjQtMDEtMjAgMTA6MzAnLAogICAgICAgIGRldmljZTogJ+WPjeW6lOmHnEEnLAogICAgICAgIHZhbHVlOiA2Ni41CiAgICAgIH1dOwogICAgICB0aGlzLnRvdGFsID0gdGhpcy50YWJsZURhdGEubGVuZ3RoOwogICAgfSwKICAgIC8vIOWvvOWHuuaVsOaNrgogICAgZXhwb3J0RGF0YSgpIHsKICAgICAgY29uc3Qgd2IgPSBYTFNYLnV0aWxzLmJvb2tfbmV3KCk7CiAgICAgIGNvbnN0IHdzID0gWExTWC51dGlscy5qc29uX3RvX3NoZWV0KHRoaXMudGFibGVEYXRhKTsKICAgICAgWExTWC51dGlscy5ib29rX2FwcGVuZF9zaGVldCh3Yiwgd3MsICfliIbmnpDmlbDmja4nKTsKICAgICAgY29uc3Qgd2JvdXQgPSBYTFNYLndyaXRlKHdiLCB7CiAgICAgICAgYm9va1R5cGU6ICd4bHN4JywKICAgICAgICB0eXBlOiAnYXJyYXknCiAgICAgIH0pOwogICAgICBzYXZlQXMobmV3IEJsb2IoW3dib3V0XSwgewogICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nCiAgICAgIH0pLCAn5YiG5p6Q5pWw5o2uLnhsc3gnKTsKICAgIH0sCiAgICAvLyDlr7zlh7rlm77ooagKICAgIGV4cG9ydEltYWdlKCkgewogICAgICBjb25zdCBjaGFydCA9IGVjaGFydHMuZ2V0SW5zdGFuY2VCeURvbShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkNoYXJ0JykpOwogICAgICBjb25zdCB1cmwgPSBjaGFydC5nZXREYXRhVVJMKCk7CiAgICAgIHNhdmVBcyh0aGlzLmRhdGFVUkx0b0Jsb2IodXJsKSwgJ+WIhuaekOWbvuihqC5wbmcnKTsKICAgIH0sCiAgICAvLyBEYXRhVVJM6L2sQmxvYgogICAgZGF0YVVSTHRvQmxvYihkYXRhdXJsKSB7CiAgICAgIGNvbnN0IGFyciA9IGRhdGF1cmwuc3BsaXQoJywnKTsKICAgICAgY29uc3QgbWltZSA9IGFyclswXS5tYXRjaCgvOiguKj8pOy8pWzFdOwogICAgICBjb25zdCBic3RyID0gYXRvYihhcnJbMV0pOwogICAgICBsZXQgbiA9IGJzdHIubGVuZ3RoOwogICAgICBjb25zdCB1OGFyciA9IG5ldyBVaW50OEFycmF5KG4pOwogICAgICB3aGlsZSAobi0tKSB7CiAgICAgICAgdThhcnJbbl0gPSBic3RyLmNoYXJDb2RlQXQobik7CiAgICAgIH0KICAgICAgcmV0dXJuIG5ldyBCbG9iKFt1OGFycl0sIHsKICAgICAgICB0eXBlOiBtaW1lCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS/neWtmOS4uuaooeadvwogICAgc2F2ZUFzVGVtcGxhdGUoKSB7CiAgICAgIHRoaXMudGVtcGxhdGVEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDkv53lrZjmqKHmnb8KICAgIHNhdmVUZW1wbGF0ZSgpIHsKICAgICAgdGhpcy4kcmVmcy50ZW1wbGF0ZUZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgLy8g5L+d5a2Y5qih5p2/6YC76L6RCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aooeadv+S/neWtmOaIkOWKnycpOwogICAgICAgICAgdGhpcy50ZW1wbGF0ZURpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOmHjee9ruihqOWNlQogICAgcmVzZXRGb3JtKCkgewogICAgICB0aGlzLiRyZWZzLmFuYWx5c2lzRm9ybS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIC8vIOWIhumhteWkhOeQhgogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHZhbDsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gdmFsOwogICAgfQogIH0KfTs="},{"version":3,"names":["echarts","saveAs","XLSX","name","data","analysisForm","type","metrics","dateRange","granularity","devices","rules","required","message","trigger","deviceList","loading","conclusion","tableData","tableColumns","currentPage","pageSize","total","templateDialogVisible","templateForm","description","templateRules","mounted","getDeviceList","methods","id","startAnalysis","$refs","validate","valid","setTimeout","generateAnalysisResult","initChart","title","generateTableData","chart","init","document","getElementById","option","setOption","prop","label","width","time","device","value","length","exportData","wb","utils","book_new","ws","json_to_sheet","book_append_sheet","wbout","write","bookType","Blob","exportImage","getInstanceByDom","url","getDataURL","dataURLtoBlob","dataurl","arr","split","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","saveAsTemplate","saveTemplate","$message","success","resetForm","resetFields","handleSizeChange","val","handleCurrentChange"],"sources":["src/views/Analysis.vue"],"sourcesContent":["<template>\r\n  <div class=\"analysis\">\r\n    <!-- 分析条件设置 -->\r\n    <el-card>\r\n      <div slot=\"header\">\r\n        <span>数据分析条件</span>\r\n        <el-button style=\"float: right\"\r\n                   type=\"primary\"\r\n                   size=\"small\"\r\n                   @click=\"saveAsTemplate\">\r\n          保存为模板\r\n        </el-button>\r\n      </div>\r\n\r\n      <el-form :model=\"analysisForm\" :rules=\"rules\" ref=\"analysisForm\" label-width=\"100px\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"分析类型\" prop=\"type\">\r\n              <el-select v-model=\"analysisForm.type\" placeholder=\"请选择分析类型\">\r\n                <el-option label=\"趋势分析\" value=\"trend\"></el-option>\r\n                <el-option label=\"对比分析\" value=\"compare\"></el-option>\r\n                <el-option label=\"相关性分析\" value=\"correlation\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"数据指标\" prop=\"metrics\">\r\n              <el-select v-model=\"analysisForm.metrics\"\r\n                         multiple\r\n                         placeholder=\"请选择数据指标\">\r\n                <el-option label=\"温度\" value=\"temperature\"></el-option>\r\n                <el-option label=\"压力\" value=\"pressure\"></el-option>\r\n                <el-option label=\"流量\" value=\"flow\"></el-option>\r\n                <el-option label=\"设备状态\" value=\"status\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"时间范围\" prop=\"dateRange\">\r\n              <el-date-picker\r\n                  v-model=\"analysisForm.dateRange\"\r\n                  type=\"daterange\"\r\n                  range-separator=\"至\"\r\n                  start-placeholder=\"开始日期\"\r\n                  end-placeholder=\"结束日期\">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"数据粒度\" prop=\"granularity\">\r\n              <el-select v-model=\"analysisForm.granularity\" placeholder=\"请选择数据粒度\">\r\n                <el-option label=\"分钟\" value=\"minute\"></el-option>\r\n                <el-option label=\"小时\" value=\"hour\"></el-option>\r\n                <el-option label=\"天\" value=\"day\"></el-option>\r\n                <el-option label=\"月\" value=\"month\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"设备选择\" prop=\"devices\">\r\n              <el-select v-model=\"analysisForm.devices\"\r\n                         multiple\r\n                         placeholder=\"请选择设备\">\r\n                <el-option\r\n                    v-for=\"device in deviceList\"\r\n                    :key=\"device.id\"\r\n                    :label=\"device.name\"\r\n                    :value=\"device.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"startAnalysis\">开始分析</el-button>\r\n              <el-button @click=\"resetForm\">重置</el-button>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <!-- 分析结果展示 -->\r\n    <el-card style=\"margin-top: 20px;\" v-loading=\"loading\">\r\n      <div slot=\"header\">\r\n        <span>分析结果</span>\r\n        <el-button-group style=\"float: right\">\r\n          <el-button size=\"small\" @click=\"exportData\">导出数据</el-button>\r\n          <el-button size=\"small\" @click=\"exportImage\">导出图表</el-button>\r\n        </el-button-group>\r\n      </div>\r\n\r\n      <!-- 图表展示区域 -->\r\n      <div class=\"chart-container\">\r\n        <div id=\"mainChart\" style=\"height: 400px;\"></div>\r\n      </div>\r\n\r\n      <!-- 分析结论 -->\r\n      <div class=\"analysis-conclusion\" v-if=\"conclusion\">\r\n        <h3>分析结论</h3>\r\n        <el-alert\r\n            :title=\"conclusion.title\"\r\n            :type=\"conclusion.type\"\r\n            :description=\"conclusion.description\"\r\n            show-icon>\r\n        </el-alert>\r\n      </div>\r\n\r\n      <!-- 详细数据表格 -->\r\n      <div class=\"data-table\" v-if=\"tableData.length\">\r\n        <h3>详细数据</h3>\r\n        <el-table :data=\"tableData\" border style=\"width: 100%\">\r\n          <el-table-column\r\n              v-for=\"(col, index) in tableColumns\"\r\n              :key=\"index\"\r\n              :prop=\"col.prop\"\r\n              :label=\"col.label\"\r\n              :width=\"col.width\">\r\n          </el-table-column>\r\n        </el-table>\r\n        <div class=\"pagination-container\">\r\n          <el-pagination\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\"\r\n              :current-page=\"currentPage\"\r\n              :page-sizes=\"[10, 20, 50, 100]\"\r\n              :page-size=\"pageSize\"\r\n              layout=\"total, sizes, prev, pager, next, jumper\"\r\n              :total=\"total\">\r\n          </el-pagination>\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 保存模板对话框 -->\r\n    <el-dialog title=\"保存分析模板\" :visible.sync=\"templateDialogVisible\">\r\n      <el-form :model=\"templateForm\" :rules=\"templateRules\" ref=\"templateForm\">\r\n        <el-form-item label=\"模板名称\" prop=\"name\">\r\n          <el-input v-model=\"templateForm.name\" placeholder=\"请输入模板名称\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"模板描述\" prop=\"description\">\r\n          <el-input type=\"textarea\"\r\n                    v-model=\"templateForm.description\"\r\n                    placeholder=\"请输入模板描述\">\r\n          </el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"templateDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveTemplate\">保存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts'\r\nimport { saveAs } from 'file-saver'\r\nimport * as XLSX from 'xlsx'\r\n\r\nexport default {\r\n  name: 'Analysis',\r\n  data() {\r\n    return {\r\n      // 分析表单\r\n      analysisForm: {\r\n        type: '',\r\n        metrics: [],\r\n        dateRange: [],\r\n        granularity: '',\r\n        devices: []\r\n      },\r\n      // 表单验证规则\r\n      rules: {\r\n        type: [{ required: true, message: '请选择分析类型', trigger: 'change' }],\r\n        metrics: [{ required: true, message: '请选择数据指标', trigger: 'change' }],\r\n        dateRange: [{ required: true, message: '请选择时间范围', trigger: 'change' }],\r\n        granularity: [{ required: true, message: '请选择数据粒度', trigger: 'change' }],\r\n        devices: [{ required: true, message: '请选择设备', trigger: 'change' }]\r\n      },\r\n      // 设备列表\r\n      deviceList: [],\r\n      // 加载状态\r\n      loading: false,\r\n      // 分析结论\r\n      conclusion: null,\r\n      // 表格数据\r\n      tableData: [],\r\n      tableColumns: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      // 模板对话框\r\n      templateDialogVisible: false,\r\n      templateForm: {\r\n        name: '',\r\n        description: ''\r\n      },\r\n      templateRules: {\r\n        name: [{ required: true, message: '请输入模板名称', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getDeviceList()\r\n  },\r\n  methods: {\r\n    // 获取设备列表\r\n    async getDeviceList() {\r\n      // 模拟API调用\r\n      this.deviceList = [\r\n        { id: 'DEV001', name: '反应釜A' },\r\n        { id: 'DEV002', name: '储罐B' }\r\n      ]\r\n    },\r\n\r\n    // 开始分析\r\n    startAnalysis() {\r\n      this.$refs.analysisForm.validate(valid => {\r\n        if (valid) {\r\n          this.loading = true\r\n          // 模拟分析过程\r\n          setTimeout(() => {\r\n            this.generateAnalysisResult()\r\n            this.loading = false\r\n          }, 2000)\r\n        }\r\n      })\r\n    },\r\n\r\n    // 生成分析结果\r\n    generateAnalysisResult() {\r\n      // 生成图表\r\n      this.initChart()\r\n\r\n      // 生成结论\r\n      this.conclusion = {\r\n        title: '分析发现异常趋势',\r\n        type: 'warning',\r\n        description: '在过去24小时内，设备温度呈现上升趋势，建议关注。'\r\n      }\r\n\r\n      // 生成表格数据\r\n      this.generateTableData()\r\n    },\r\n\r\n    // 初始化图表\r\n    initChart() {\r\n      const chart = echarts.init(document.getElementById('mainChart'))\r\n      const option = {\r\n        // 图表配置...\r\n      }\r\n      chart.setOption(option)\r\n    },\r\n\r\n    // 生成表格数据\r\n    generateTableData() {\r\n      // 生成表格列\r\n      this.tableColumns = [\r\n        { prop: 'time', label: '时间', width: '180' },\r\n        { prop: 'device', label: '设备', width: '120' },\r\n        { prop: 'value', label: '数值', width: '100' }\r\n      ]\r\n\r\n      // 生成表格数据\r\n      this.tableData = [\r\n        { time: '2024-01-20 10:00', device: '反应釜A', value: 65.2 },\r\n        { time: '2024-01-20 10:30', device: '反应釜A', value: 66.5 }\r\n      ]\r\n      this.total = this.tableData.length\r\n    },\r\n\r\n    // 导出数据\r\n    exportData() {\r\n      const wb = XLSX.utils.book_new()\r\n      const ws = XLSX.utils.json_to_sheet(this.tableData)\r\n      XLSX.utils.book_append_sheet(wb, ws, '分析数据')\r\n      const wbout = XLSX.write(wb, { bookType: 'xlsx', type: 'array' })\r\n      saveAs(new Blob([wbout], { type: 'application/octet-stream' }), '分析数据.xlsx')\r\n    },\r\n\r\n    // 导出图表\r\n    exportImage() {\r\n      const chart = echarts.getInstanceByDom(document.getElementById('mainChart'))\r\n      const url = chart.getDataURL()\r\n      saveAs(this.dataURLtoBlob(url), '分析图表.png')\r\n    },\r\n\r\n    // DataURL转Blob\r\n    dataURLtoBlob(dataurl) {\r\n      const arr = dataurl.split(',')\r\n      const mime = arr[0].match(/:(.*?);/)[1]\r\n      const bstr = atob(arr[1])\r\n      let n = bstr.length\r\n      const u8arr = new Uint8Array(n)\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n)\r\n      }\r\n      return new Blob([u8arr], { type: mime })\r\n    },\r\n\r\n    // 保存为模板\r\n    saveAsTemplate() {\r\n      this.templateDialogVisible = true\r\n    },\r\n\r\n    // 保存模板\r\n    saveTemplate() {\r\n      this.$refs.templateForm.validate(valid => {\r\n        if (valid) {\r\n          // 保存模板逻辑\r\n          this.$message.success('模板保存成功')\r\n          this.templateDialogVisible = false\r\n        }\r\n      })\r\n    },\r\n\r\n    // 重置表单\r\n    resetForm() {\r\n      this.$refs.analysisForm.resetFields()\r\n    },\r\n\r\n    // 分页处理\r\n    handleSizeChange(val) {\r\n      this.pageSize = val\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.analysis {\r\n  padding: 20px;\r\n}\r\n\r\n.chart-container {\r\n  margin: 20px 0;\r\n}\r\n\r\n.analysis-conclusion {\r\n  margin: 20px 0;\r\n}\r\n\r\n.data-table {\r\n  margin-top: 20px;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n\r\n.el-form-item {\r\n  margin-bottom: 18px;\r\n}\r\n</style>"],"mappings":"AA+JA,YAAAA,OAAA;AACA,SAAAC,MAAA;AACA,YAAAC,IAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACA;MACAC,YAAA;QACAC,IAAA;QACAC,OAAA;QACAC,SAAA;QACAC,WAAA;QACAC,OAAA;MACA;MACA;MACAC,KAAA;QACAL,IAAA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAP,OAAA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAN,SAAA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAL,WAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAJ,OAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACA;MACAC,UAAA;MACA;MACAC,OAAA;MACA;MACAC,UAAA;MACA;MACAC,SAAA;MACAC,YAAA;MACAC,WAAA;MACAC,QAAA;MACAC,KAAA;MACA;MACAC,qBAAA;MACAC,YAAA;QACArB,IAAA;QACAsB,WAAA;MACA;MACAC,aAAA;QACAvB,IAAA;UAAAS,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAa,QAAA;IACA,KAAAC,aAAA;EACA;EACAC,OAAA;IACA;IACA,MAAAD,cAAA;MACA;MACA,KAAAb,UAAA,IACA;QAAAe,EAAA;QAAA3B,IAAA;MAAA,GACA;QAAA2B,EAAA;QAAA3B,IAAA;MAAA,EACA;IACA;IAEA;IACA4B,cAAA;MACA,KAAAC,KAAA,CAAA3B,YAAA,CAAA4B,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAlB,OAAA;UACA;UACAmB,UAAA;YACA,KAAAC,sBAAA;YACA,KAAApB,OAAA;UACA;QACA;MACA;IACA;IAEA;IACAoB,uBAAA;MACA;MACA,KAAAC,SAAA;;MAEA;MACA,KAAApB,UAAA;QACAqB,KAAA;QACAhC,IAAA;QACAmB,WAAA;MACA;;MAEA;MACA,KAAAc,iBAAA;IACA;IAEA;IACAF,UAAA;MACA,MAAAG,KAAA,GAAAxC,OAAA,CAAAyC,IAAA,CAAAC,QAAA,CAAAC,cAAA;MACA,MAAAC,MAAA;QACA;MAAA,CACA;MACAJ,KAAA,CAAAK,SAAA,CAAAD,MAAA;IACA;IAEA;IACAL,kBAAA;MACA;MACA,KAAApB,YAAA,IACA;QAAA2B,IAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAF,IAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAF,IAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA,EACA;;MAEA;MACA,KAAA9B,SAAA,IACA;QAAA+B,IAAA;QAAAC,MAAA;QAAAC,KAAA;MAAA,GACA;QAAAF,IAAA;QAAAC,MAAA;QAAAC,KAAA;MAAA,EACA;MACA,KAAA7B,KAAA,QAAAJ,SAAA,CAAAkC,MAAA;IACA;IAEA;IACAC,WAAA;MACA,MAAAC,EAAA,GAAApD,IAAA,CAAAqD,KAAA,CAAAC,QAAA;MACA,MAAAC,EAAA,GAAAvD,IAAA,CAAAqD,KAAA,CAAAG,aAAA,MAAAxC,SAAA;MACAhB,IAAA,CAAAqD,KAAA,CAAAI,iBAAA,CAAAL,EAAA,EAAAG,EAAA;MACA,MAAAG,KAAA,GAAA1D,IAAA,CAAA2D,KAAA,CAAAP,EAAA;QAAAQ,QAAA;QAAAxD,IAAA;MAAA;MACAL,MAAA,KAAA8D,IAAA,EAAAH,KAAA;QAAAtD,IAAA;MAAA;IACA;IAEA;IACA0D,YAAA;MACA,MAAAxB,KAAA,GAAAxC,OAAA,CAAAiE,gBAAA,CAAAvB,QAAA,CAAAC,cAAA;MACA,MAAAuB,GAAA,GAAA1B,KAAA,CAAA2B,UAAA;MACAlE,MAAA,MAAAmE,aAAA,CAAAF,GAAA;IACA;IAEA;IACAE,cAAAC,OAAA;MACA,MAAAC,GAAA,GAAAD,OAAA,CAAAE,KAAA;MACA,MAAAC,IAAA,GAAAF,GAAA,IAAAG,KAAA;MACA,MAAAC,IAAA,GAAAC,IAAA,CAAAL,GAAA;MACA,IAAAM,CAAA,GAAAF,IAAA,CAAAtB,MAAA;MACA,MAAAyB,KAAA,OAAAC,UAAA,CAAAF,CAAA;MACA,OAAAA,CAAA;QACAC,KAAA,CAAAD,CAAA,IAAAF,IAAA,CAAAK,UAAA,CAAAH,CAAA;MACA;MACA,WAAAb,IAAA,EAAAc,KAAA;QAAAvE,IAAA,EAAAkE;MAAA;IACA;IAEA;IACAQ,eAAA;MACA,KAAAzD,qBAAA;IACA;IAEA;IACA0D,aAAA;MACA,KAAAjD,KAAA,CAAAR,YAAA,CAAAS,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA;UACA,KAAAgD,QAAA,CAAAC,OAAA;UACA,KAAA5D,qBAAA;QACA;MACA;IACA;IAEA;IACA6D,UAAA;MACA,KAAApD,KAAA,CAAA3B,YAAA,CAAAgF,WAAA;IACA;IAEA;IACAC,iBAAAC,GAAA;MACA,KAAAlE,QAAA,GAAAkE,GAAA;IACA;IACAC,oBAAAD,GAAA;MACA,KAAAnE,WAAA,GAAAmE,GAAA;IACA;EACA;AACA","ignoreList":[]}]}