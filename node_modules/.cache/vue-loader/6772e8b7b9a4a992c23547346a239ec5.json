{"remainingRequest":"D:\\safety-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\safety-management-system\\src\\views\\Monitor.vue?vue&type=style&index=0&id=27b451e0&scoped=true&lang=css","dependencies":[{"path":"D:\\safety-management-system\\src\\views\\Monitor.vue","mtime":1735549936311},{"path":"D:\\safety-management-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\safety-management-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\safety-management-system\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\safety-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\safety-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoubW9uaXRvciB7DQogIHBhZGRpbmc6IDIwcHg7DQp9DQoNCi5tb25pdG9yLWl0ZW0gew0KICBkaXNwbGF5OiBmbGV4Ow0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KfQ0KDQouaXRlbS1pY29uIHsNCiAgZm9udC1zaXplOiAyNHB4Ow0KICBtYXJnaW4tcmlnaHQ6IDE1cHg7DQogIGNvbG9yOiAjNDA5RUZGOw0KfQ0KDQouaXRlbS1pbmZvIHsNCiAgZmxleDogMTsNCn0NCg0KLml0ZW0tdmFsdWUgew0KICBmb250LXNpemU6IDI0cHg7DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KICBjb2xvcjogIzMwMzEzMzsNCn0NCg0KLml0ZW0tdGl0bGUgew0KICBmb250LXNpemU6IDE0cHg7DQogIGNvbG9yOiAjOTA5Mzk5Ow0KICBtYXJnaW4tdG9wOiA1cHg7DQp9DQoNCi53YXJuaW5nIC5pdGVtLXZhbHVlIHsNCiAgY29sb3I6ICNFNkEyM0M7DQp9DQoNCi5hbGVydC1saXN0IHsNCiAgbWF4LWhlaWdodDogMzUwcHg7DQogIG92ZXJmbG93LXk6IGF1dG87DQp9DQoNCi5hbGVydC1pdGVtIHsNCiAgcGFkZGluZzogMTBweDsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNFQkVFRjU7DQogIGN1cnNvcjogcG9pbnRlcjsNCn0NCg0KLmFsZXJ0LWl0ZW06bGFzdC1jaGlsZCB7DQogIGJvcmRlci1ib3R0b206IG5vbmU7DQp9DQoNCi5hbGVydC1pdGVtOmhvdmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0Y1RjdGQTsNCn0NCg0KLmFsZXJ0LXRpbWUgew0KICBmb250LXNpemU6IDEycHg7DQogIGNvbG9yOiAjOTA5Mzk5Ow0KfQ0KDQouYWxlcnQtY29udGVudCB7DQogIG1hcmdpbjogNXB4IDA7DQp9DQoNCi5hbGVydC1jb250ZW50IGkgew0KICBtYXJnaW4tcmlnaHQ6IDVweDsNCn0NCg0KLmFsZXJ0LWFjdGlvbnMgew0KICB0ZXh0LWFsaWduOiByaWdodDsNCn0NCg0KLmNyaXRpY2FsIGkgew0KICBjb2xvcjogI0Y1NkM2QzsNCn0NCg0KLndhcm5pbmcgaSB7DQogIGNvbG9yOiAjRTZBMjNDOw0KfQ0KDQouaW5mbyBpIHsNCiAgY29sb3I6ICM5MDkzOTk7DQp9DQo="},{"version":3,"sources":["Monitor.vue"],"names":[],"mappings":";AA0ZA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"Monitor.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"monitor\">\r\n    <!-- 实时数据概览 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"6\" v-for=\"(item, index) in realTimeData\" :key=\"index\">\r\n        <el-card shadow=\"hover\" :class=\"{'warning': item.isWarning}\">\r\n          <div class=\"monitor-item\">\r\n            <div class=\"item-icon\">\r\n              <i :class=\"item.icon\"></i>\r\n            </div>\r\n            <div class=\"item-info\">\r\n              <div class=\"item-value\">{{ item.value }}{{ item.unit }}</div>\r\n              <div class=\"item-title\">{{ item.title }}</div>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 实时监控图表 -->\r\n    <el-row :gutter=\"20\" style=\"margin-top: 20px;\">\r\n      <el-col :span=\"16\">\r\n        <el-card>\r\n          <div slot=\"header\">\r\n            <span>实时监控数据</span>\r\n            <el-radio-group v-model=\"monitorType\" size=\"small\" style=\"float: right;\">\r\n              <el-radio-button label=\"temperature\">温度</el-radio-button>\r\n              <el-radio-button label=\"pressure\">压力</el-radio-button>\r\n              <el-radio-button label=\"humidity\">湿度</el-radio-button>\r\n            </el-radio-group>\r\n          </div>\r\n          <div id=\"realTimeChart\" style=\"height: 350px;\"></div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"8\">\r\n        <el-card>\r\n          <div slot=\"header\">\r\n            <span>预警信息</span>\r\n            <el-button\r\n                type=\"text\"\r\n                style=\"float: right; padding: 3px 0\"\r\n                @click=\"handleAllAlerts\">\r\n              查看全部\r\n            </el-button>\r\n          </div>\r\n          <div class=\"alert-list\">\r\n            <div v-for=\"(alert, index) in alerts\" :key=\"index\"\r\n                 class=\"alert-item\"\r\n                 :class=\"alert.level\">\r\n              <div class=\"alert-time\">{{ alert.time }}</div>\r\n              <div class=\"alert-content\">\r\n                <i :class=\"getAlertIcon(alert.level)\"></i>\r\n                {{ alert.message }}\r\n              </div>\r\n              <div class=\"alert-actions\">\r\n                <el-button\r\n                    type=\"text\"\r\n                    size=\"small\"\r\n                    @click=\"handleAlert(alert)\">\r\n                  处理\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 设备状态监控 -->\r\n    <el-card style=\"margin-top: 20px;\">\r\n      <div slot=\"header\">\r\n        <span>设备状态监控</span>\r\n        <el-button-group style=\"float: right;\">\r\n          <el-button size=\"small\" @click=\"refreshDevices\">刷新</el-button>\r\n          <el-button size=\"small\" type=\"primary\" @click=\"exportDeviceStatus\">导出</el-button>\r\n        </el-button-group>\r\n      </div>\r\n      <el-table :data=\"deviceList\" style=\"width: 100%\">\r\n        <el-table-column prop=\"deviceId\" label=\"设备ID\" width=\"120\"></el-table-column>\r\n        <el-table-column prop=\"name\" label=\"设备名称\" width=\"150\"></el-table-column>\r\n        <el-table-column prop=\"area\" label=\"所在区域\" width=\"150\"></el-table-column>\r\n        <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag :type=\"getStatusType(scope.row.status)\">\r\n              {{ scope.row.status }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"temperature\" label=\"温度\" width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            {{ scope.row.temperature }}℃\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"pressure\" label=\"压力\" width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            {{ scope.row.pressure }}MPa\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"lastUpdate\" label=\"最后更新时间\" width=\"180\"></el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n                size=\"mini\"\r\n                @click=\"handleDeviceDetail(scope.row)\">详情</el-button>\r\n            <el-button\r\n                size=\"mini\"\r\n                type=\"warning\"\r\n                @click=\"handleDeviceMaintenance(scope.row)\">维护</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n\r\n    <!-- 处理预警弹窗 -->\r\n    <el-dialog\r\n        title=\"预警处理\"\r\n        :visible.sync=\"alertDialogVisible\"\r\n        width=\"500px\">\r\n      <el-form :model=\"alertForm\" label-width=\"100px\">\r\n        <el-form-item label=\"预警信息\">\r\n          <div>{{ currentAlert.message }}</div>\r\n        </el-form-item>\r\n        <el-form-item label=\"处理方式\">\r\n          <el-select v-model=\"alertForm.method\" placeholder=\"请选择处理方式\">\r\n            <el-option label=\"现场处理\" value=\"onsite\"></el-option>\r\n            <el-option label=\"远程处理\" value=\"remote\"></el-option>\r\n            <el-option label=\"转交专家\" value=\"expert\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"处理说明\">\r\n          <el-input\r\n              type=\"textarea\"\r\n              v-model=\"alertForm.description\"\r\n              rows=\"3\"\r\n              placeholder=\"请输入处理说明\">\r\n          </el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"alertDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitAlertHandle\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts'\r\n\r\nexport default {\r\n  name: 'Monitor',\r\n  data() {\r\n    return {\r\n      // 实时数据\r\n      realTimeData: [\r\n        {\r\n          title: '平均温度',\r\n          value: '25.6',\r\n          unit: '℃',\r\n          icon: 'el-icon-temperature',\r\n          isWarning: false\r\n        },\r\n        {\r\n          title: '系统压力',\r\n          value: '0.8',\r\n          unit: 'MPa',\r\n          icon: 'el-icon-gauge',\r\n          isWarning: true\r\n        },\r\n        {\r\n          title: '环境湿度',\r\n          value: '45',\r\n          unit: '%',\r\n          icon: 'el-icon-water',\r\n          isWarning: false\r\n        },\r\n        {\r\n          title: '设备在线率',\r\n          value: '98.5',\r\n          unit: '%',\r\n          icon: 'el-icon-connection',\r\n          isWarning: false\r\n        }\r\n      ],\r\n      monitorType: 'temperature',\r\n      // 预警信息\r\n      alerts: [\r\n        {\r\n          time: '2024-01-20 10:30:25',\r\n          level: 'critical',\r\n          message: '1号反应釜压力异常',\r\n          status: 'pending'\r\n        },\r\n        {\r\n          time: '2024-01-20 10:28:15',\r\n          level: 'warning',\r\n          message: '2号储罐温度升高',\r\n          status: 'pending'\r\n        },\r\n        {\r\n          time: '2024-01-20 10:25:30',\r\n          level: 'info',\r\n          message: '3号管道需要维护',\r\n          status: 'pending'\r\n        }\r\n      ],\r\n      // 设备列表\r\n      deviceList: [\r\n        {\r\n          deviceId: 'DEV001',\r\n          name: '1号反应釜',\r\n          area: '生产区A',\r\n          status: '运行中',\r\n          temperature: 25.6,\r\n          pressure: 0.8,\r\n          lastUpdate: '2024-01-20 10:30:25'\r\n        },\r\n        {\r\n          deviceId: 'DEV002',\r\n          name: '2号储罐',\r\n          area: '储存区B',\r\n          status: '警告',\r\n          temperature: 28.9,\r\n          pressure: 0.9,\r\n          lastUpdate: '2024-01-20 10:30:20'\r\n        }\r\n      ],\r\n      // 预警处理\r\n      alertDialogVisible: false,\r\n      currentAlert: {},\r\n      alertForm: {\r\n        method: '',\r\n        description: ''\r\n      },\r\n      // 实时图表实例\r\n      chart: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initRealTimeChart()\r\n    this.startRealTimeUpdate()\r\n  },\r\n  beforeDestroy() {\r\n    if (this.chart) {\r\n      this.chart.dispose()\r\n    }\r\n    clearInterval(this.updateTimer)\r\n  },\r\n  methods: {\r\n    // 初始化实时图表\r\n    initRealTimeChart() {\r\n      this.chart = echarts.init(document.getElementById('realTimeChart'))\r\n      this.updateChart()\r\n      window.addEventListener('resize', () => this.chart.resize())\r\n    },\r\n    // 更新图表数据\r\n    updateChart() {\r\n      const option = {\r\n        title: {\r\n          text: this.getMonitorTitle()\r\n        },\r\n        tooltip: {\r\n          trigger: 'axis'\r\n        },\r\n        xAxis: {\r\n          type: 'time',\r\n          splitLine: {\r\n            show: false\r\n          }\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          splitLine: {\r\n            show: true\r\n          }\r\n        },\r\n        series: [{\r\n          name: this.getMonitorTitle(),\r\n          type: 'line',\r\n          smooth: true,\r\n          data: this.generateMockData(),\r\n          areaStyle: {\r\n            opacity: 0.3\r\n          }\r\n        }]\r\n      }\r\n      this.chart.setOption(option)\r\n    },\r\n    // 生成模拟数据\r\n    generateMockData() {\r\n      const now = new Date()\r\n      const data = []\r\n      for (let i = 0; i < 100; i++) {\r\n        const time = new Date(now - (100 - i) * 1000)\r\n        let value\r\n        switch (this.monitorType) {\r\n          case 'temperature':\r\n            value = 25 + Math.random() * 2\r\n            break\r\n          case 'pressure':\r\n            value = 0.8 + Math.random() * 0.2\r\n            break\r\n          case 'humidity':\r\n            value = 45 + Math.random() * 5\r\n            break\r\n        }\r\n        data.push([time, value])\r\n      }\r\n      return data\r\n    },\r\n    // 开始实时更新\r\n    startRealTimeUpdate() {\r\n      this.updateTimer = setInterval(() => {\r\n        const data = this.chart.getOption().series[0].data\r\n        const now = new Date()\r\n        data.shift()\r\n        let value\r\n        switch (this.monitorType) {\r\n          case 'temperature':\r\n            value = 25 + Math.random() * 2\r\n            break\r\n          case 'pressure':\r\n            value = 0.8 + Math.random() * 0.2\r\n            break\r\n          case 'humidity':\r\n            value = 45 + Math.random() * 5\r\n            break\r\n        }\r\n        data.push([now, value])\r\n        this.chart.setOption({\r\n          series: [{\r\n            data: data\r\n          }]\r\n        })\r\n      }, 1000)\r\n    },\r\n    // 获取监控项标题\r\n    getMonitorTitle() {\r\n      const titles = {\r\n        temperature: '温度监控',\r\n        pressure: '压力监控',\r\n        humidity: '湿度监控'\r\n      }\r\n      return titles[this.monitorType]\r\n    },\r\n    // 获取预警图标\r\n    getAlertIcon(level) {\r\n      const icons = {\r\n        critical: 'el-icon-error',\r\n        warning: 'el-icon-warning',\r\n        info: 'el-icon-info'\r\n      }\r\n      return icons[level]\r\n    },\r\n    // 获取设备状态样式\r\n    getStatusType(status) {\r\n      const types = {\r\n        '运行中': 'success',\r\n        '警告': 'warning',\r\n        '故障': 'danger',\r\n        '维护中': 'info'\r\n      }\r\n      return types[status]\r\n    },\r\n    // 处理预警\r\n    handleAlert(alert) {\r\n      this.currentAlert = alert\r\n      this.alertDialogVisible = true\r\n    },\r\n    // 查看所有预警\r\n    handleAllAlerts() {\r\n      this.$router.push('/alerts')\r\n    },\r\n    // 提交预警处理\r\n    submitAlertHandle() {\r\n      if (!this.alertForm.method || !this.alertForm.description) {\r\n        this.$message.warning('请完善处理信息')\r\n        return\r\n      }\r\n      // 这里添加处理逻辑\r\n      this.$message.success('预警处理成功')\r\n      this.alertDialogVisible = false\r\n    },\r\n    // 刷新设备列表\r\n    refreshDevices() {\r\n      this.$message.success('刷新成功')\r\n    },\r\n    // 导出设备状态\r\n    exportDeviceStatus() {\r\n      // 这里添加导出逻辑\r\n      this.$message.success('导出成功')\r\n    },\r\n    // 查看设备详情\r\n    handleDeviceDetail(device) {\r\n      this.$router.push(`/device/${device.deviceId}`)\r\n    },\r\n    // 设备维护\r\n    handleDeviceMaintenance(device) {\r\n      this.$message.success(`开始维护设备：${device.name}`)\r\n    }\r\n  },\r\n  watch: {\r\n    monitorType() {\r\n      this.updateChart()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.monitor {\r\n  padding: 20px;\r\n}\r\n\r\n.monitor-item {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.item-icon {\r\n  font-size: 24px;\r\n  margin-right: 15px;\r\n  color: #409EFF;\r\n}\r\n\r\n.item-info {\r\n  flex: 1;\r\n}\r\n\r\n.item-value {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: #303133;\r\n}\r\n\r\n.item-title {\r\n  font-size: 14px;\r\n  color: #909399;\r\n  margin-top: 5px;\r\n}\r\n\r\n.warning .item-value {\r\n  color: #E6A23C;\r\n}\r\n\r\n.alert-list {\r\n  max-height: 350px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.alert-item {\r\n  padding: 10px;\r\n  border-bottom: 1px solid #EBEEF5;\r\n  cursor: pointer;\r\n}\r\n\r\n.alert-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.alert-item:hover {\r\n  background-color: #F5F7FA;\r\n}\r\n\r\n.alert-time {\r\n  font-size: 12px;\r\n  color: #909399;\r\n}\r\n\r\n.alert-content {\r\n  margin: 5px 0;\r\n}\r\n\r\n.alert-content i {\r\n  margin-right: 5px;\r\n}\r\n\r\n.alert-actions {\r\n  text-align: right;\r\n}\r\n\r\n.critical i {\r\n  color: #F56C6C;\r\n}\r\n\r\n.warning i {\r\n  color: #E6A23C;\r\n}\r\n\r\n.info i {\r\n  color: #909399;\r\n}\r\n</style>"]}]}